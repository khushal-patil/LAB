 
Write a PL/SQL block for following requirements and handle the exceptions. Roll no. of students will be entered by the user. Attendance of roll no. entered by user will be checked in the Stud table. If attendance is less than 75% then display the message “Term not granted” and set the status in stud table as “Detained”. Otherwise display message “Term granted” and set the status in stud table as “Not Detained”. Student (Roll, Name, Attendance, Status) 
 
 CREATE TABLE stud (
    roll INT PRIMARY KEY,
    name VARCHAR(100),
    attendance DECIMAL(5, 2),  -- Attendance percentage
    status VARCHAR(20)         -- Status: Detained / Not Detained
);

DECLARE
    -- Variable to store the roll number entered by the user
    v_roll INT;
    
    -- Variable to store the attendance of the student
    v_attendance DECIMAL(5, 2);
    
    -- Variable to store the current student's status
    v_status VARCHAR(20);
    
BEGIN
    -- Prompt the user to input the roll number
    v_roll := &roll_no;  -- This will prompt the user to enter the roll number
    
    -- Fetch the student's attendance from the stud table
    BEGIN
        SELECT attendance, status
        INTO v_attendance, v_status
        FROM stud
        WHERE roll = v_roll;
    EXCEPTION
        WHEN NO_DATA_FOUND THEN
            -- Handle the case when no student with the given roll number is found
            DBMS_OUTPUT.PUT_LINE('No student found with roll number ' || v_roll);
            RAISE;  -- Raise exception to exit the block
        WHEN OTHERS THEN
            -- Handle any other exceptions
            DBMS_OUTPUT.PUT_LINE('Error: ' || SQLERRM);
            RAISE;  -- Raise exception to exit the block
    END;
    
    -- Check the attendance and update the status accordingly
    IF v_attendance < 75 THEN
        -- If attendance is less than 75%, set status to "Detained"
        DBMS_OUTPUT.PUT_LINE('Term not granted');
        UPDATE stud
        SET status = 'Detained'
        WHERE roll = v_roll;
    ELSE
        -- If attendance is 75% or more, set status to "Not Detained"
        DBMS_OUTPUT.PUT_LINE('Term granted');
        UPDATE stud
        SET status = 'Not Detained'
        WHERE roll = v_roll;
    END IF;
    
    -- Commit the changes to the database
    COMMIT;
    
EXCEPTION
    WHEN OTHERS THEN
        -- In case of any error, rollback the transaction
        ROLLBACK;
        DBMS_OUTPUT.PUT_LINE('Error: ' || SQLERRM);
END;
/
